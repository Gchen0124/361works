CREATE TABLE `daily_snapshots` (
	`id` integer PRIMARY KEY AUTOINCREMENT NOT NULL,
	`user_id` text NOT NULL,
	`snapshot_date` integer NOT NULL,
	`year` integer NOT NULL,
	`latest_plan_contents` text NOT NULL,
	`latest_reality_contents` text NOT NULL,
	`plan_last_updated` integer,
	`reality_last_updated` integer,
	`completion_rate` integer DEFAULT 0,
	`created_at` integer DEFAULT (unixepoch()),
	`updated_at` integer DEFAULT (unixepoch()),
	FOREIGN KEY (`user_id`) REFERENCES `users`(`id`) ON UPDATE no action ON DELETE cascade
);
--> statement-breakpoint
CREATE INDEX `idx_daily_user_date` ON `daily_snapshots` (`user_id`,`snapshot_date`);--> statement-breakpoint
CREATE INDEX `idx_daily_user_year` ON `daily_snapshots` (`user_id`,`year`);--> statement-breakpoint
CREATE TABLE `journal_plan_matrix` (
	`id` integer PRIMARY KEY AUTOINCREMENT NOT NULL,
	`user_id` text NOT NULL,
	`snapshot_timestamp` integer NOT NULL,
	`year` integer NOT NULL,
	`day_001` text,
	`day_002` text,
	`day_003` text,
	`day_004` text,
	`day_005` text,
	`day_006` text,
	`day_007` text,
	`day_008` text,
	`day_009` text,
	`day_010` text,
	`day_011` text,
	`day_012` text,
	`day_013` text,
	`day_014` text,
	`day_015` text,
	`day_016` text,
	`day_017` text,
	`day_018` text,
	`day_019` text,
	`day_020` text,
	`day_021` text,
	`day_022` text,
	`day_023` text,
	`day_024` text,
	`day_025` text,
	`day_026` text,
	`day_027` text,
	`day_028` text,
	`day_029` text,
	`day_030` text,
	`day_031` text,
	`day_032` text,
	`day_033` text,
	`day_034` text,
	`day_035` text,
	`day_036` text,
	`day_037` text,
	`day_038` text,
	`day_039` text,
	`day_040` text,
	`day_041` text,
	`day_042` text,
	`day_043` text,
	`day_044` text,
	`day_045` text,
	`day_046` text,
	`day_047` text,
	`day_048` text,
	`day_049` text,
	`day_050` text,
	`day_051` text,
	`day_052` text,
	`day_053` text,
	`day_054` text,
	`day_055` text,
	`day_056` text,
	`day_057` text,
	`day_058` text,
	`day_059` text,
	`day_060` text,
	`day_061` text,
	`day_062` text,
	`day_063` text,
	`day_064` text,
	`day_065` text,
	`day_066` text,
	`day_067` text,
	`day_068` text,
	`day_069` text,
	`day_070` text,
	`day_071` text,
	`day_072` text,
	`day_073` text,
	`day_074` text,
	`day_075` text,
	`day_076` text,
	`day_077` text,
	`day_078` text,
	`day_079` text,
	`day_080` text,
	`day_081` text,
	`day_082` text,
	`day_083` text,
	`day_084` text,
	`day_085` text,
	`day_086` text,
	`day_087` text,
	`day_088` text,
	`day_089` text,
	`day_090` text,
	`day_091` text,
	`day_092` text,
	`day_093` text,
	`day_094` text,
	`day_095` text,
	`day_096` text,
	`day_097` text,
	`day_098` text,
	`day_099` text,
	`day_100` text,
	`day_101` text,
	`day_102` text,
	`day_103` text,
	`day_104` text,
	`day_105` text,
	`day_106` text,
	`day_107` text,
	`day_108` text,
	`day_109` text,
	`day_110` text,
	`day_111` text,
	`day_112` text,
	`day_113` text,
	`day_114` text,
	`day_115` text,
	`day_116` text,
	`day_117` text,
	`day_118` text,
	`day_119` text,
	`day_120` text,
	`day_121` text,
	`day_122` text,
	`day_123` text,
	`day_124` text,
	`day_125` text,
	`day_126` text,
	`day_127` text,
	`day_128` text,
	`day_129` text,
	`day_130` text,
	`day_131` text,
	`day_132` text,
	`day_133` text,
	`day_134` text,
	`day_135` text,
	`day_136` text,
	`day_137` text,
	`day_138` text,
	`day_139` text,
	`day_140` text,
	`day_141` text,
	`day_142` text,
	`day_143` text,
	`day_144` text,
	`day_145` text,
	`day_146` text,
	`day_147` text,
	`day_148` text,
	`day_149` text,
	`day_150` text,
	`day_151` text,
	`day_152` text,
	`day_153` text,
	`day_154` text,
	`day_155` text,
	`day_156` text,
	`day_157` text,
	`day_158` text,
	`day_159` text,
	`day_160` text,
	`day_161` text,
	`day_162` text,
	`day_163` text,
	`day_164` text,
	`day_165` text,
	`day_166` text,
	`day_167` text,
	`day_168` text,
	`day_169` text,
	`day_170` text,
	`day_171` text,
	`day_172` text,
	`day_173` text,
	`day_174` text,
	`day_175` text,
	`day_176` text,
	`day_177` text,
	`day_178` text,
	`day_179` text,
	`day_180` text,
	`day_181` text,
	`day_182` text,
	`day_183` text,
	`day_184` text,
	`day_185` text,
	`day_186` text,
	`day_187` text,
	`day_188` text,
	`day_189` text,
	`day_190` text,
	`day_191` text,
	`day_192` text,
	`day_193` text,
	`day_194` text,
	`day_195` text,
	`day_196` text,
	`day_197` text,
	`day_198` text,
	`day_199` text,
	`day_200` text,
	`day_201` text,
	`day_202` text,
	`day_203` text,
	`day_204` text,
	`day_205` text,
	`day_206` text,
	`day_207` text,
	`day_208` text,
	`day_209` text,
	`day_210` text,
	`day_211` text,
	`day_212` text,
	`day_213` text,
	`day_214` text,
	`day_215` text,
	`day_216` text,
	`day_217` text,
	`day_218` text,
	`day_219` text,
	`day_220` text,
	`day_221` text,
	`day_222` text,
	`day_223` text,
	`day_224` text,
	`day_225` text,
	`day_226` text,
	`day_227` text,
	`day_228` text,
	`day_229` text,
	`day_230` text,
	`day_231` text,
	`day_232` text,
	`day_233` text,
	`day_234` text,
	`day_235` text,
	`day_236` text,
	`day_237` text,
	`day_238` text,
	`day_239` text,
	`day_240` text,
	`day_241` text,
	`day_242` text,
	`day_243` text,
	`day_244` text,
	`day_245` text,
	`day_246` text,
	`day_247` text,
	`day_248` text,
	`day_249` text,
	`day_250` text,
	`day_251` text,
	`day_252` text,
	`day_253` text,
	`day_254` text,
	`day_255` text,
	`day_256` text,
	`day_257` text,
	`day_258` text,
	`day_259` text,
	`day_260` text,
	`day_261` text,
	`day_262` text,
	`day_263` text,
	`day_264` text,
	`day_265` text,
	`day_266` text,
	`day_267` text,
	`day_268` text,
	`day_269` text,
	`day_270` text,
	`day_271` text,
	`day_272` text,
	`day_273` text,
	`day_274` text,
	`day_275` text,
	`day_276` text,
	`day_277` text,
	`day_278` text,
	`day_279` text,
	`day_280` text,
	`day_281` text,
	`day_282` text,
	`day_283` text,
	`day_284` text,
	`day_285` text,
	`day_286` text,
	`day_287` text,
	`day_288` text,
	`day_289` text,
	`day_290` text,
	`day_291` text,
	`day_292` text,
	`day_293` text,
	`day_294` text,
	`day_295` text,
	`day_296` text,
	`day_297` text,
	`day_298` text,
	`day_299` text,
	`day_300` text,
	`day_301` text,
	`day_302` text,
	`day_303` text,
	`day_304` text,
	`day_305` text,
	`day_306` text,
	`day_307` text,
	`day_308` text,
	`day_309` text,
	`day_310` text,
	`day_311` text,
	`day_312` text,
	`day_313` text,
	`day_314` text,
	`day_315` text,
	`day_316` text,
	`day_317` text,
	`day_318` text,
	`day_319` text,
	`day_320` text,
	`day_321` text,
	`day_322` text,
	`day_323` text,
	`day_324` text,
	`day_325` text,
	`day_326` text,
	`day_327` text,
	`day_328` text,
	`day_329` text,
	`day_330` text,
	`day_331` text,
	`day_332` text,
	`day_333` text,
	`day_334` text,
	`day_335` text,
	`day_336` text,
	`day_337` text,
	`day_338` text,
	`day_339` text,
	`day_340` text,
	`day_341` text,
	`day_342` text,
	`day_343` text,
	`day_344` text,
	`day_345` text,
	`day_346` text,
	`day_347` text,
	`day_348` text,
	`day_349` text,
	`day_350` text,
	`day_351` text,
	`day_352` text,
	`day_353` text,
	`day_354` text,
	`day_355` text,
	`day_356` text,
	`day_357` text,
	`day_358` text,
	`day_359` text,
	`day_360` text,
	`day_361` text,
	`day_362` text,
	`day_363` text,
	`day_364` text,
	`day_365` text,
	`total_planned_days` integer DEFAULT 0,
	`metadata` text,
	`created_at` integer DEFAULT (unixepoch()),
	FOREIGN KEY (`user_id`) REFERENCES `users`(`id`) ON UPDATE no action ON DELETE cascade
);
--> statement-breakpoint
CREATE INDEX `idx_plan_user_timestamp` ON `journal_plan_matrix` (`user_id`,`snapshot_timestamp`);--> statement-breakpoint
CREATE INDEX `idx_plan_user_year` ON `journal_plan_matrix` (`user_id`,`year`);--> statement-breakpoint
CREATE TABLE `journal_reality_matrix` (
	`id` integer PRIMARY KEY AUTOINCREMENT NOT NULL,
	`user_id` text NOT NULL,
	`snapshot_timestamp` integer NOT NULL,
	`year` integer NOT NULL,
	`day_001` text,
	`day_002` text,
	`day_003` text,
	`day_004` text,
	`day_005` text,
	`day_006` text,
	`day_007` text,
	`day_008` text,
	`day_009` text,
	`day_010` text,
	`day_011` text,
	`day_012` text,
	`day_013` text,
	`day_014` text,
	`day_015` text,
	`day_016` text,
	`day_017` text,
	`day_018` text,
	`day_019` text,
	`day_020` text,
	`day_021` text,
	`day_022` text,
	`day_023` text,
	`day_024` text,
	`day_025` text,
	`day_026` text,
	`day_027` text,
	`day_028` text,
	`day_029` text,
	`day_030` text,
	`day_031` text,
	`day_032` text,
	`day_033` text,
	`day_034` text,
	`day_035` text,
	`day_036` text,
	`day_037` text,
	`day_038` text,
	`day_039` text,
	`day_040` text,
	`day_041` text,
	`day_042` text,
	`day_043` text,
	`day_044` text,
	`day_045` text,
	`day_046` text,
	`day_047` text,
	`day_048` text,
	`day_049` text,
	`day_050` text,
	`day_051` text,
	`day_052` text,
	`day_053` text,
	`day_054` text,
	`day_055` text,
	`day_056` text,
	`day_057` text,
	`day_058` text,
	`day_059` text,
	`day_060` text,
	`day_061` text,
	`day_062` text,
	`day_063` text,
	`day_064` text,
	`day_065` text,
	`day_066` text,
	`day_067` text,
	`day_068` text,
	`day_069` text,
	`day_070` text,
	`day_071` text,
	`day_072` text,
	`day_073` text,
	`day_074` text,
	`day_075` text,
	`day_076` text,
	`day_077` text,
	`day_078` text,
	`day_079` text,
	`day_080` text,
	`day_081` text,
	`day_082` text,
	`day_083` text,
	`day_084` text,
	`day_085` text,
	`day_086` text,
	`day_087` text,
	`day_088` text,
	`day_089` text,
	`day_090` text,
	`day_091` text,
	`day_092` text,
	`day_093` text,
	`day_094` text,
	`day_095` text,
	`day_096` text,
	`day_097` text,
	`day_098` text,
	`day_099` text,
	`day_100` text,
	`day_101` text,
	`day_102` text,
	`day_103` text,
	`day_104` text,
	`day_105` text,
	`day_106` text,
	`day_107` text,
	`day_108` text,
	`day_109` text,
	`day_110` text,
	`day_111` text,
	`day_112` text,
	`day_113` text,
	`day_114` text,
	`day_115` text,
	`day_116` text,
	`day_117` text,
	`day_118` text,
	`day_119` text,
	`day_120` text,
	`day_121` text,
	`day_122` text,
	`day_123` text,
	`day_124` text,
	`day_125` text,
	`day_126` text,
	`day_127` text,
	`day_128` text,
	`day_129` text,
	`day_130` text,
	`day_131` text,
	`day_132` text,
	`day_133` text,
	`day_134` text,
	`day_135` text,
	`day_136` text,
	`day_137` text,
	`day_138` text,
	`day_139` text,
	`day_140` text,
	`day_141` text,
	`day_142` text,
	`day_143` text,
	`day_144` text,
	`day_145` text,
	`day_146` text,
	`day_147` text,
	`day_148` text,
	`day_149` text,
	`day_150` text,
	`day_151` text,
	`day_152` text,
	`day_153` text,
	`day_154` text,
	`day_155` text,
	`day_156` text,
	`day_157` text,
	`day_158` text,
	`day_159` text,
	`day_160` text,
	`day_161` text,
	`day_162` text,
	`day_163` text,
	`day_164` text,
	`day_165` text,
	`day_166` text,
	`day_167` text,
	`day_168` text,
	`day_169` text,
	`day_170` text,
	`day_171` text,
	`day_172` text,
	`day_173` text,
	`day_174` text,
	`day_175` text,
	`day_176` text,
	`day_177` text,
	`day_178` text,
	`day_179` text,
	`day_180` text,
	`day_181` text,
	`day_182` text,
	`day_183` text,
	`day_184` text,
	`day_185` text,
	`day_186` text,
	`day_187` text,
	`day_188` text,
	`day_189` text,
	`day_190` text,
	`day_191` text,
	`day_192` text,
	`day_193` text,
	`day_194` text,
	`day_195` text,
	`day_196` text,
	`day_197` text,
	`day_198` text,
	`day_199` text,
	`day_200` text,
	`day_201` text,
	`day_202` text,
	`day_203` text,
	`day_204` text,
	`day_205` text,
	`day_206` text,
	`day_207` text,
	`day_208` text,
	`day_209` text,
	`day_210` text,
	`day_211` text,
	`day_212` text,
	`day_213` text,
	`day_214` text,
	`day_215` text,
	`day_216` text,
	`day_217` text,
	`day_218` text,
	`day_219` text,
	`day_220` text,
	`day_221` text,
	`day_222` text,
	`day_223` text,
	`day_224` text,
	`day_225` text,
	`day_226` text,
	`day_227` text,
	`day_228` text,
	`day_229` text,
	`day_230` text,
	`day_231` text,
	`day_232` text,
	`day_233` text,
	`day_234` text,
	`day_235` text,
	`day_236` text,
	`day_237` text,
	`day_238` text,
	`day_239` text,
	`day_240` text,
	`day_241` text,
	`day_242` text,
	`day_243` text,
	`day_244` text,
	`day_245` text,
	`day_246` text,
	`day_247` text,
	`day_248` text,
	`day_249` text,
	`day_250` text,
	`day_251` text,
	`day_252` text,
	`day_253` text,
	`day_254` text,
	`day_255` text,
	`day_256` text,
	`day_257` text,
	`day_258` text,
	`day_259` text,
	`day_260` text,
	`day_261` text,
	`day_262` text,
	`day_263` text,
	`day_264` text,
	`day_265` text,
	`day_266` text,
	`day_267` text,
	`day_268` text,
	`day_269` text,
	`day_270` text,
	`day_271` text,
	`day_272` text,
	`day_273` text,
	`day_274` text,
	`day_275` text,
	`day_276` text,
	`day_277` text,
	`day_278` text,
	`day_279` text,
	`day_280` text,
	`day_281` text,
	`day_282` text,
	`day_283` text,
	`day_284` text,
	`day_285` text,
	`day_286` text,
	`day_287` text,
	`day_288` text,
	`day_289` text,
	`day_290` text,
	`day_291` text,
	`day_292` text,
	`day_293` text,
	`day_294` text,
	`day_295` text,
	`day_296` text,
	`day_297` text,
	`day_298` text,
	`day_299` text,
	`day_300` text,
	`day_301` text,
	`day_302` text,
	`day_303` text,
	`day_304` text,
	`day_305` text,
	`day_306` text,
	`day_307` text,
	`day_308` text,
	`day_309` text,
	`day_310` text,
	`day_311` text,
	`day_312` text,
	`day_313` text,
	`day_314` text,
	`day_315` text,
	`day_316` text,
	`day_317` text,
	`day_318` text,
	`day_319` text,
	`day_320` text,
	`day_321` text,
	`day_322` text,
	`day_323` text,
	`day_324` text,
	`day_325` text,
	`day_326` text,
	`day_327` text,
	`day_328` text,
	`day_329` text,
	`day_330` text,
	`day_331` text,
	`day_332` text,
	`day_333` text,
	`day_334` text,
	`day_335` text,
	`day_336` text,
	`day_337` text,
	`day_338` text,
	`day_339` text,
	`day_340` text,
	`day_341` text,
	`day_342` text,
	`day_343` text,
	`day_344` text,
	`day_345` text,
	`day_346` text,
	`day_347` text,
	`day_348` text,
	`day_349` text,
	`day_350` text,
	`day_351` text,
	`day_352` text,
	`day_353` text,
	`day_354` text,
	`day_355` text,
	`day_356` text,
	`day_357` text,
	`day_358` text,
	`day_359` text,
	`day_360` text,
	`day_361` text,
	`day_362` text,
	`day_363` text,
	`day_364` text,
	`day_365` text,
	`total_reality_days` integer DEFAULT 0,
	`metadata` text,
	`created_at` integer DEFAULT (unixepoch()),
	FOREIGN KEY (`user_id`) REFERENCES `users`(`id`) ON UPDATE no action ON DELETE cascade
);
--> statement-breakpoint
CREATE INDEX `idx_reality_user_timestamp` ON `journal_reality_matrix` (`user_id`,`snapshot_timestamp`);--> statement-breakpoint
CREATE INDEX `idx_reality_user_year` ON `journal_reality_matrix` (`user_id`,`year`);--> statement-breakpoint
CREATE TABLE `timeline_index` (
	`id` integer PRIMARY KEY AUTOINCREMENT NOT NULL,
	`user_id` text NOT NULL,
	`timestamp` integer NOT NULL,
	`year` integer NOT NULL,
	`entry_type` text NOT NULL,
	`changes_count` integer DEFAULT 0,
	`description` text,
	`created_at` integer DEFAULT (unixepoch()),
	FOREIGN KEY (`user_id`) REFERENCES `users`(`id`) ON UPDATE no action ON DELETE cascade
);
--> statement-breakpoint
CREATE INDEX `idx_timeline_user_timestamp` ON `timeline_index` (`user_id`,`timestamp`);--> statement-breakpoint
CREATE INDEX `idx_timeline_user_year_type` ON `timeline_index` (`user_id`,`year`,`entry_type`);--> statement-breakpoint
CREATE TABLE `users` (
	`id` text PRIMARY KEY DEFAULT (hex(randomblob(16))) NOT NULL,
	`username` text NOT NULL,
	`password` text NOT NULL,
	`created_at` integer DEFAULT (unixepoch())
);
--> statement-breakpoint
CREATE UNIQUE INDEX `users_username_unique` ON `users` (`username`);